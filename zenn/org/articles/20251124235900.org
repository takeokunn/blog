:PROPERTIES:
:ID:       F7A1203E-F033-4656-91E7-15F598951FA9
:END:
#+TITLE: Software DesignでNix連載しました
#+DESCRIPTION: description
#+DATE: 2025-12-17T22:36:59+0900
#+GFM_TAGS: nix
#+GFM_CUSTOM_FRONT_MATTER: :emoji 👍
#+GFM_CUSTOM_FRONT_MATTER: :type tech
#+GFM_CUSTOM_FRONT_MATTER: :published false
#+STARTUP: fold
#+OPTIONS: toc:nil
* はじめに

この記事は [[https://adventar.org/calendars/11657][Nix Advent Calendar 2025]] の18日目です。
昨日はComamocaさんによる [[https://comamoca.dev/blog/2025-12-17-build-gleam-erlang-target-to-single-binary-with-nix/][NixでGleam(Erlang)をシングルバイナリにする]] でした。

幸運なことにSoftware Designにて連載を執筆する機会に恵まれました。
本記事では、今後同誌への寄稿を目指すエンジニアの方々に向け、執筆の進め方や編集部とのやり取り、実際に経験して分かった執筆のポイントを紹介します。

* 出版物

2025年9月〜2026年1月まで全5回分書きました。

- [[https://gihyo.jp/magazine/SD/archive/2025/202509][Software Design 2025年9月号 - 技術評論社]]
- [[https://gihyo.jp/magazine/SD/archive/2025/202510][Software Design 2025年10月号 - 技術評論社]]
- [[https://gihyo.jp/magazine/SD/archive/2025/202511][Software Design 2025年11月号 - 技術評論社]]
- [[https://gihyo.jp/magazine/SD/archive/2025/202512][Software Design 2025年12月号 - 技術評論社]]
- [[https://gihyo.jp/magazine/SD/archive/2026/202601][Software Design 2026年01月号 - 技術評論社]]

初回の2025年9月号では表紙に載りました。

https://gihyo.jp/magazine/SD/archive/2025/202509

この記事の投稿日である2025年12月18日に最終号が発売されるので是非皆さん書店で手に取ってみてください。

https://gihyo.jp/magazine/SD/archive/2026/202601

* 連載のきっかけ

[[https://zenn.dev/takeokunn/articles/20250211225710][Software Design 2025年3月号にEmacsについて書きました]] にも書いた通り、2025年1月に [[https://x.com/tadsan][@tadsan]] と一緒に特集記事を書きました。

特集が終わった後、編集者の方に「Nixで連載か単著かできないですかねー」と雑に相談していました。

期間が空いた2025年3月頃に「2025年9月号から連載しませんか? 目次案を出して全何回になるのか出してほしい」と誘われたので二つ返事で受けました。

* 目次

下記の目次で書きました。
想定読者を「ITエンジニア歴5年目くらいでざっくり業務を一通り経験した」と設定し、途中から読んでも面白くなるように配慮しながら書きました。

また、NixはSoftware Design読者で知ってる人がほぼいないマイナー技術なので、技術的な説明を詳しくするというよりは読み物として面白くなるように設計しました。

|  章 | タイトル                          |
|-----+----------------------------------|
| 1.1 | Hello Nix                        |
| 1.2 | Nixの歴史                        |
| 1.3 | Nixの仕組み                       |
| 1.4 | Nix使うと何が嬉しいの？            |
| 1.5 | どんな時に使える？ 実際のユースケース |
| 1.6 | 終わりに                          |

|  章 | タイトル                                |
|-----+----------------------------------------|
| 2.1 | 2.1. はじめに：なぜ「ちいさく」はじめるのか |
| 2.2 | Nixのインストール手順                    |
| 2.3 | Hello, Nix！まずは試してみる             |
| 2.4 | ちいさく学ぶNix言語                      |
| 2.5 | 開発環境の"ちいさな"構築術                |
| 2.6 | 終わりに                                |

|  章 | タイトル                                              |
|-----+------------------------------------------------------|
| 3.1 | はじめに：Flakesによる再現性の厳密な保証                 |
| 3.2 | flake.nixの構造：inputsとoutputsからなる自己完結した定義 |
| 3.3 | nix develop入門：モダンな開発環境への移行                |
| 3.4 | nix buildの実践：自作ツールをNixパッケージにする          |
| 3.5 | Nixの再現性を支える仕組み：Derivationと/nix/store       |
| 3.6 | おわりに：ビルドの再現から、高度な開発環境構築へ           |

|  章 | タイトル                     |
|-----+-----------------------------|
| 4.1 | はじめに                     |
| 4.2 | devenvによる高度な開発環境構築 |
| 4.3 | nix profile解説             |
| 4.4 | home-manager紹介            |
| 4.5 | nix-darwin/nixos管理        |
| 4.6 | 終わりに                     |

|  章 | タイトル                              |
|-----+--------------------------------------|
| 5.1 | はじめに:NixOSをサーバとして採用する理由 |
| 5.2 | Flakesによる宣言的定義                 |
| 5.3 | 必須サービスとNixOSモジュールシステム    |
| 5.4 | サーバ運用の生命線：シークレット管理      |
| 5.5 | アトミック・リモートデプロイ             |
| 5.6 | まとめ：NixOSがもたらす運用革命         |

* 毎月のスケジュール

次のようなスケジュールを計5回繰り返しました。
これはあくまで目安であり、かなりスケジュールに融通を効かせてもらいました。(ご迷惑をおかけしました)

誌面PDFは実際に雑誌に掲載する形に組版されたものです。
誌面PDFになる前はGitHub上で管理をしており、誌面PDF後はPDFのコメント機能でやりとりをしていました。

| 日付          | アクション                                      |
|---------------+------------------------------------------------|
| 10日頃まで     | 初稿提出                                        |
| 20日頃まで     | レビュー、校正、ファクトチェックなど                |
| 月末まで       | 誌面PDFにしてもらう、他編集者からのフィードバック調整 |
| 月末ぐらい     | 印刷所に入稿                                    |
| 翌月15日くらい | 書店に並ぶ                                      |

* 執筆について
** 全体の流れ

GitHub上

1. 7〜8割くらいのクオリティで書く
2. 友人2人にレビューしてもらう
3. 編集者にレビューしてもらう

** 執筆フロー

「1ページ 1200文字」「1回 8ページ」なので大体1万文字書く必要がありました。

1. 大見出し/小見出しをGeminiと対話して詰める
2. 小見出しに書く内容をひたすらに箇条書きする
3. 文章の流れがおかしくないか等をClaude Codeと一緒に確認する
4. 小見出しごとの分量を見積る
5. 文章を一気に書く
6. Claude Codeにレビューしてもらいながら直す

** レビュー関連

- スタンス: 要望は気軽に上げて、受け入れるかは俺が決める
- 友人2人にはDMチャンネルで五月雨式に投げてもらう
- SD編集担当にIssueを作ってもらう
- 指摘内容を1commitずつ修正する
- 各個人の指摘をPRにして何を対応したのか明確にする

** CI関連

textlintを以下のように設定して動かしています。
textlintはNixで管理しています。

* 良かったこと

- プロの編集者の指摘を貰える
- Nixに興味のない不特定多数の人に読んでもらえる
- 満足感が個人ブログの比にならない
- 面白かったよーってフィードバックをもらえる

* 大変だったこと

- 一定のプレッシャーがある
- 月1はかなりエネルギーが必要

* 終わりに
