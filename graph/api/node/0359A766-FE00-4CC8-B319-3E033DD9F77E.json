{
  "id": "0359A766-FE00-4CC8-B319-3E033DD9F77E",
  "title": "emacs wdiredが便利だった",
  "raw": ":PROPERTIES:\n:ID:       0359A766-FE00-4CC8-B319-3E033DD9F77E\n:END:\n#+TITLE: emacs wdiredが便利だった\n#+AUTHOR: takeokunn\n#+DESCRIPTION: description\n#+DATE: 2025-11-29T21:06:48+0900\n#+HUGO_BASE_DIR: ../../\n#+HUGO_CATEGORIES: fleeting\n#+HUGO_SECTION: posts/fleeting\n#+HUGO_TAGS: fleeting emacs\n#+HUGO_DRAFT: false\n#+STARTUP: fold\n* 背景・動機\n\n[[https://x.com/ryoppippi][ryoppippi]] の「【外資ITエンジニアの開発環境】VimmerによるVimmer（になりたい人）のためのVim動画」という動画を見た。\n\n{{< youtube id=\"XsAlXYWzcv4\" title=\"【外資ITエンジニアの開発環境】VimmerによるVimmer（になりたい人）のためのVim動画\" >}}\n\nその中で [[https://github.com/stevearc/oil.nvim][oil.nvim]] 紹介があり、vimの通常操作でファイル操作が可能になる機能がある。\nEmacsのDiredでも同様のことがないか調査した所、標準機能に =wdired.el= というものがあったので使ってみた。\n\n* 試したこと・やったこと\n** 1. wdiredの機能調査\n\n=wdired= は =Writable Dired= の略でDired拡張。\n\nhttps://github.com/emacs-mirror/emacs/blob/master/lisp/wdired.el\n\n大きな特徴は3点。\nEmacs上で完結しているが故のkmacroなどの他の機能を使えるのが便利。\n\n1. テキスト処理の延長でファイル操作ができる（ディレクトリ名も変更可能）\n2. 安全性とトランザクション\n3. Emacs Lispによる拡張可能\n\n** 2. wdired設定\n\nDired上で起動するの方法は =wdired-change-to-wdired-mode= を有効にすればよく、 =r= に割り当てている。\n\n#+begin_src emacs-lisp\n  (define-key dired-mode-map \"r\" #'wdired-change-to-wdired-mode)\n#+end_src\n\n=defcustom= はそこそあるが、file permissionを変更できるように =wdired-allow-to-change-permissions= は設定してもよさそう。\n\n#+begin_src emacs-lisp\n  ;;; 定義元\n\n  (defcustom wdired-allow-to-change-permissions nil\n    \"If non-nil, the permissions bits of the files are editable.\n\n  If t, to change a single bit, put the cursor over it and press the\n  space bar, or left click over it.  You can also hit the letter you want\n  to set: if this value is allowed, the character in the buffer will be\n  changed.  Anyway, the point is advanced one position, so, for example,\n  you can keep the <x> key pressed to give execution permissions to\n  everybody to that file.\n\n  If `advanced', the bits are freely editable.  You can use\n  `string-rectangle', `query-replace', etc.  You can put any value (even\n  newlines), but if you want your changes to be useful, you better put a\n  intelligible value.\n\n  The real change of the permissions is done by the external\n  program \\\"chmod\\\", which must exist.\"\n    :type '(choice (const :tag \"Not allowed\" nil)\n                   (const :tag \"Toggle/set bits\" t)\n                   (other :tag \"Bits freely editable\" advanced)))\n\n  ;;; 自分の設定\n  (setotp wdired-allow-to-change-permissions 'advanced)\n#+end_src\n** 3. 挙動の確認\n\n1. 適当なディレクトリでdiredを開いて =r= を押す\n2. ファイル名やpermissionを変更する\n3. =C-c C-c= で保存する or =C-c C-k= でロールバックする\n\n[[file:../../static/images/E62300C4-243B-413C-9C25-32897789BDF6.png]]\n\n* 得られた結果・所感\n\ndiredでのファイル操作が本当に楽になった。\n普段がんばってshell script書いたりしてたので無駄なことをしてしまったと反省している。\n\n* 今後の展開・検討事項\n\nwdiredの話をしたらwgrepも同様の体験ができるのでこちらも調査したい。\n",
  "backlinks": [
    {
      "title": "emacs wgrepが便利だった",
      "source": "99A051B3-00A2-484A-8E02-2E2206FE81B3"
    }
  ]
}