:PROPERTIES:
:ID:       27ABD117-372F-4295-84C7-532D0B3397AC
:mtime:    20230130155441
:ctime:    20230130155405
:END:

#+TITLE: org-modeでmysql検証環境を整える
#+DESCRIPTION: org-modeでmysql検証環境を整える
#+DATE: 2023-01-30
#+HUGO_BASE_DIR: ../../
#+HUGO_SECTION: posts/permanent
#+HUGO_TAGS: permanent
#+HUGO_DRAFT: true
#+STARTUP: content
#+STARTUP: nohideblocks

* [WIP] MySQL環境テンプレート

#+begin_src org
  ,* MySQL
  :PROPERTIES:
  :header-args:sql: :engine mysql :dbhost 127.0.0.1 :dbport 13306 :dbuser root :dbpassword P@ssw0rd :database testdb
  :END:
  ,** docker-compose.yml
  ,#+begin_src yaml :tangle (expand-file-name "~/projects/mysql-sandbox/docker-compose.yml") :mkdirp yes
    version: '3'
    services:
      db:
        image: mysql:8.0
        environment:
          MYSQL_ROOT_PASSWORD: P@ssw0rd
          MYSQL_DATABASE: testdb
        ports:
          - 13306:3306
        security_opt:
          - seccomp:unconfined
        command: --default-authentication-plugin=mysql_native_password
  ,#+end_src
  ,** up
  ,#+begin_src shell :results none
    docker compose -f ~/projects/mysql-sandbox/docker-compose.yml up -d
  ,#+end_src
  ,** down
  ,#+begin_src shell :results none
    docker compose -f ~/projects/mysql-sandbox/docker-compose.yml down
  ,#+end_src
  ,** 疏通テスト
  ,#+begin_src sql
    SELECT 1;
  ,#+end_src

  ,#+RESULTS:
  | 1 |
  |---|
  | 1 |
#+end_src
