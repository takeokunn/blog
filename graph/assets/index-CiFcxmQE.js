import{c as N}from"./index-DVcZB_95.js";const d=(function(e,t,n){const r=N(n);if(!e||!e.type||!e.children)throw new Error("Expected parent node");if(typeof t=="number"){if(t<0||t===Number.POSITIVE_INFINITY)throw new Error("Expected positive finite number as index")}else if(t=e.children.indexOf(t),t<0)throw new Error("Expected child node or index");for(;++t<e.children.length;)if(r(e.children[t],t,e))return e.children[t]}),a=(function(e){if(e==null)return B;if(typeof e=="string")return T(e);if(typeof e=="object")return A(e);if(typeof e=="function")return p(e);throw new Error("Expected function, string, or array as `test`")});function A(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=a(e[n]);return p(r);function r(...c){let o=-1;for(;++o<t.length;)if(t[o].apply(this,c))return!0;return!1}}function T(e){return p(t);function t(n){return n.tagName===e}}function p(e){return t;function t(n,r,c){return!!(C(n)&&e.call(this,n,typeof r=="number"?r:void 0,c||void 0))}}function B(e){return!!(e&&typeof e=="object"&&"type"in e&&e.type==="element"&&"tagName"in e&&typeof e.tagName=="string")}function C(e){return e!==null&&typeof e=="object"&&"type"in e&&"tagName"in e}const g=/\n/g,m=/[\t ]+/g,h=a("br"),w=a(v),I=a("p"),b=a("tr"),j=a(["datalist","head","noembed","noframes","noscript","rp","script","style","template","title",_,L]),y=a(["address","article","aside","blockquote","body","caption","center","dd","dialog","dir","dl","dt","div","figure","figcaption","footer","form,","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","legend","li","listing","main","menu","nav","ol","p","plaintext","pre","section","ul","xmp"]);function W(e,t){const n=t||{},r="children"in e?e.children:[],c=y(e),o=E(e,{whitespace:n.whitespace||"normal"}),i=[];(e.type==="text"||e.type==="comment")&&i.push(...k(e,{breakBefore:!0,breakAfter:!0}));let l=-1;for(;++l<r.length;)i.push(...x(r[l],e,{whitespace:o,breakBefore:l?void 0:c,breakAfter:l<r.length-1?h(r[l+1]):c}));const s=[];let u;for(l=-1;++l<i.length;){const f=i[l];typeof f=="number"?u!==void 0&&f>u&&(u=f):f&&(u!==void 0&&u>-1&&s.push(`
`.repeat(u)||" "),u=-1,s.push(f))}return s.join("")}function x(e,t,n){return e.type==="element"?F(e,t,n):e.type==="text"?n.whitespace==="normal"?k(e,n):S(e):[]}function F(e,t,n){const r=E(e,n),c=e.children||[];let o=-1,i=[];if(j(e))return i;let l,s;for(h(e)||b(e)&&d(t,e,b)?s=`
`:I(e)?(l=2,s=2):y(e)&&(l=1,s=1);++o<c.length;)i=i.concat(x(c[o],e,{whitespace:r,breakBefore:o?void 0:l,breakAfter:o<c.length-1?h(c[o+1]):s}));return w(e)&&d(t,e,w)&&i.push("	"),l&&i.unshift(l),s&&i.push(s),i}function k(e,t){const n=String(e.value),r=[],c=[];let o=0;for(;o<=n.length;){g.lastIndex=o;const s=g.exec(n),u=s&&"index"in s?s.index:n.length;r.push(O(n.slice(o,u).replace(/[\u061C\u200E\u200F\u202A-\u202E\u2066-\u2069]/g,""),o===0?t.breakBefore:!0,u===n.length?t.breakAfter:!0)),o=u+1}let i=-1,l;for(;++i<r.length;)r[i].charCodeAt(r[i].length-1)===8203||i<r.length-1&&r[i+1].charCodeAt(0)===8203?(c.push(r[i]),l=void 0):r[i]?(typeof l=="number"&&c.push(l),c.push(r[i]),l=0):(i===0||i===r.length-1)&&c.push(0);return c}function S(e){return[String(e.value)]}function O(e,t,n){const r=[];let c=0,o;for(;c<e.length;){m.lastIndex=c;const i=m.exec(e);o=i?i.index:e.length,!c&&!o&&i&&!t&&r.push(""),c!==o&&r.push(e.slice(c,o)),c=i?o+i[0].length:o}return c!==o&&!n&&r.push(""),r.join(" ")}function E(e,t){if(e.type==="element"){const n=e.properties||{};switch(e.tagName){case"listing":case"plaintext":case"xmp":return"pre";case"nobr":return"nowrap";case"pre":return n.wrap?"pre-wrap":"pre";case"td":case"th":return n.noWrap?"nowrap":t.whitespace;case"textarea":return"pre-wrap"}}return t.whitespace}function _(e){return!!(e.properties||{}).hidden}function v(e){return e.tagName==="td"||e.tagName==="th"}function L(e){return e.tagName==="dialog"&&!(e.properties||{}).open}export{W as t};
