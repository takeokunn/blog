import{s as Dt,v as Tt,E as Rt,S as Bt,d as $t,o as T,p as gt,e as Lt,h as Ut,a as Wt,z as Ht,i as zt,w as Qt,j as Xt}from"./index-DVcZB_95.js";import{t as Zt}from"./index-CAVF9NB8.js";var ke={},Ue={};function Vt(e,t){for(var n=t,i=0;i<e.length;i++){var r=i===e.length-1,s=e.charAt(i),a=n[s]||(n[s]={chars:{}});r&&(a.self=e),n=a.chars}}function et(e){if(e.length===0)return ke;for(var t={},n=0,i=e;n<i.length;n++){var r=i[n];Vt(r,t)}return t}function Kt(e){if(e.length===0)return Ue;for(var t={},n=0,i=e;n<i.length;n++){var r=i[n];t[r]=!0}return t}var Ie={},tt={type:"String",optional:!0};function Gt(e){var t={type:"NoArgument",optional:!1};function n(a){if(t.type&&t.type!==a&&t.type!=="NoArgument")throw new Error('Conflicting pseudo-class argument type: "'.concat(t.type,'" vs "').concat(a,'".'));t.type=a}for(var i=0,r=e;i<r.length;i++){var s=r[i];s==="NoArgument"&&(t.optional=!0),s==="Formula"&&n("Formula"),s==="FormulaOfSelector"&&(n("Formula"),t.ofSelector=!0),s==="String"&&n("String"),s==="Selector"&&n("Selector")}return t}function Jt(e){for(var t={},n=0,i=Object.keys(e);n<i.length;n++){var r=i[n],s=e[r];if(s)for(var a=0,u=s;a<u.length;a++){var m=u[a];(t[m]||(t[m]=[])).push(r)}}return t}function nt(e){for(var t=Jt(e),n={},i=0,r=Object.keys(t);i<r.length;i++){var s=r[i],a=t[s];a&&(n[s]=Gt(a))}return n}var se=function(){return se=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},se.apply(this,arguments)},Yt={},We={wildcard:!0};function qt(e){return e?typeof e=="boolean"?We:e:Yt}function _t(e,t){return function(n,i){return t(e(n),e(i))}}function en(e){return function(t,n){var i=e(t,n);if(!i)throw new Error("Syntax definition cannot be null or undefined.");return i}}function rt(e,t){return function(n,i){return i===!0?e:t(n===!0?e:n,i)}}function ie(e){return function(t,n){if(!n||!t)return n;if(typeof n!="object"||n===null)throw new Error("Unexpected syntax definition extension type: ".concat(n,"."));for(var i=se({},t),r=0,s=Object.entries(n);r<s.length;r++){var a=s[r],u=a[0],m=a[1];if(u!=="latest"){var p=e[u];i[u]=p(t[u],m)}}return i}}function D(e,t){return t!==void 0?t:e}function Fe(e,t){return t?e?e.concat(t):t:e}function it(e,t){if(!t)return e;if(!e)return t;for(var n=se({},e),i=0,r=Object.entries(t);i<r.length;i++){var s=r[i],a=s[0],u=s[1];if(!u){delete n[a];continue}var m=e[a];if(!m){n[a]=u;continue}n[a]=m.concat(u)}return n}var G=en(ie({baseSyntax:D,modules:Fe,tag:rt(We,ie({wildcard:D})),ids:D,classNames:D,namespace:rt(We,ie({wildcard:D})),combinators:Fe,attributes:ie({operators:Fe,caseSensitivityModifiers:Fe,unknownCaseSensitivityModifiers:D}),pseudoClasses:ie({unknown:D,definitions:it}),pseudoElements:ie({unknown:D,notation:D,definitions:_t(function(e){return Array.isArray(e)?{NoArgument:e}:e},it)})})),mt={tag:{},ids:!0,classNames:!0,combinators:[],pseudoElements:{unknown:"reject",notation:"singleColon",definitions:["first-letter","first-line"]},pseudoClasses:{unknown:"reject",definitions:{NoArgument:["link","visited","active"]}}},vt=G(mt,{tag:{wildcard:!0},combinators:[">","+"],attributes:{unknownCaseSensitivityModifiers:"reject",operators:["=","~=","|="]},pseudoElements:{definitions:["before","after"]},pseudoClasses:{unknown:"reject",definitions:{NoArgument:["hover","focus","first-child"],String:["lang"]}}}),He=G(vt,{namespace:{wildcard:!0},combinators:["~"],attributes:{operators:["^=","$=","*="]},pseudoElements:{notation:"both"},pseudoClasses:{definitions:{NoArgument:["root","last-child","first-of-type","last-of-type","only-child","only-of-type","empty","target","enabled","disabled","checked","indeterminate"],Formula:["nth-child","nth-last-child","nth-of-type","nth-last-of-type"],Selector:["not"]}}}),yt=G(He,{combinators:["||"],attributes:{caseSensitivityModifiers:["i","I","s","S"]},pseudoClasses:{definitions:{NoArgument:["any-link","local-link","target-within","scope","current","past","future","focus-within","focus-visible","read-write","read-only","placeholder-shown","default","valid","invalid","in-range","out-of-range","required","optional","blank","user-invalid","playing","paused","autofill","modal","fullscreen","picture-in-picture","defined","loading","popover-open"],Formula:["nth-col","nth-last-col"],String:["dir"],FormulaOfSelector:["nth-child","nth-last-child"],Selector:["current","is","where","has","state"]}},pseudoElements:{definitions:{NoArgument:["marker"]}}}),je={"css-position-1":{latest:!1,pseudoClasses:{definitions:{NoArgument:["static","relative","absolute"]}}},"css-position-2":{latest:!1,pseudoClasses:{definitions:{NoArgument:["static","relative","absolute","fixed"]}}},"css-position-3":{latest:!1,pseudoClasses:{definitions:{NoArgument:["sticky","fixed","absolute","relative","static"]}}},"css-position-4":{latest:!0,pseudoClasses:{definitions:{NoArgument:["sticky","fixed","absolute","relative","static","initial"]}}},"css-scoping-1":{latest:!0,pseudoClasses:{definitions:{NoArgument:["host","host-context"],Selector:["host","host-context"]}},pseudoElements:{definitions:{Selector:["slotted"]}}},"css-pseudo-4":{latest:!0,pseudoElements:{definitions:{NoArgument:["marker","selection","target-text","search-text","spelling-error","grammar-error","backdrop","file-selector-button","prefix","postfix","placeholder","details-content"],String:["highlight"]}}},"css-shadow-parts-1":{latest:!0,pseudoElements:{definitions:{String:["part"]}}}},bt=se(se({},yt),{modules:Object.entries(je).filter(function(e){var t=e[1].latest;return t}).map(function(e){var t=e[0];return t})}),tn=G(bt,{pseudoElements:{unknown:"accept"},pseudoClasses:{unknown:"accept"},attributes:{unknownCaseSensitivityModifiers:"accept"}}),ze={css1:mt,css2:vt,css3:He,"selectors-3":He,"selectors-4":yt,latest:bt,progressive:tn};function nn(){for(var e={pseudoClasses:{},pseudoElements:{}},t=["css1","css2","css3","selectors-3","selectors-4"],n=0,i=t;n<i.length;n++){var r=i[n],s=ze[r];if(s.pseudoClasses&&typeof s.pseudoClasses=="object"){var a=s.pseudoClasses.definitions;if(a)for(var u=0,m=Object.entries(a);u<m.length;u++)for(var p=m[u],b=p[1],E=0,j=b;E<j.length;E++){var H=j[E];e.pseudoClasses[H]||(e.pseudoClasses[H]=[]),e.pseudoClasses[H].includes(r)||e.pseudoClasses[H].push(r)}}if(s.pseudoElements&&typeof s.pseudoElements=="object"){var a=s.pseudoElements.definitions;if(a)if(Array.isArray(a))for(var ae=0,oe=a;ae<oe.length;ae++){var R=oe[ae];e.pseudoElements[R]||(e.pseudoElements[R]=[]),e.pseudoElements[R].includes(r)||e.pseudoElements[R].push(r)}else for(var ue=0,Ee=Object.values(a);ue<Ee.length;ue++)for(var b=Ee[ue],le=0,I=b;le<I.length;le++){var z=I[le];e.pseudoElements[z]||(e.pseudoElements[z]=[]),e.pseudoElements[z].includes(r)||e.pseudoElements[z].push(r)}}}for(var Y=0,ce=Object.entries(je);Y<ce.length;Y++){var Q=ce[Y],B=Q[0],$=Q[1];if($.pseudoClasses&&typeof $.pseudoClasses=="object"){var a=$.pseudoClasses.definitions;if(a)for(var q=0,fe=Object.values(a);q<fe.length;q++)for(var b=fe[q],de=0,_=b;de<_.length;de++){var ee=_[de];e.pseudoClasses[ee]||(e.pseudoClasses[ee]=[]),e.pseudoClasses[ee].includes(B)||e.pseudoClasses[ee].push(B)}}if($.pseudoElements&&typeof $.pseudoElements=="object"){var a=$.pseudoElements.definitions;if(a)if(Array.isArray(a))for(var pe=0,we=a;pe<we.length;pe++){var F=we[pe];e.pseudoElements[F]||(e.pseudoElements[F]=[]),e.pseudoElements[F].includes(B)||e.pseudoElements[F].push(B)}else for(var te=0,xe=Object.values(a);te<xe.length;te++)for(var b=xe[te],he=0,ne=b;he<ne.length;he++){var X=ne[he];e.pseudoElements[X]||(e.pseudoElements[X]=[]),e.pseudoElements[X].includes(B)||e.pseudoElements[X].push(B)}}}return e}var st=nn();function ye(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"||e==="-"||e==="_"||e==="\\"||e>=" "}function at(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"||e>="0"&&e<="9"||e==="-"||e==="_"||e>=" "}function be(e){return e>="a"&&e<="f"||e>="A"&&e<="F"||e>="0"&&e<="9"}var rn={" ":!0,"	":!0,"\n":!0,"\r":!0,"\f":!0},sn={'"':!0,"'":!0},Te={0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0,9:!0},an=6,Re="css-selector-parser parse error: ";function on(e){e===void 0&&(e={});var t=e.syntax,n=t===void 0?"latest":t,i=e.substitutes,r=e.strict,s=r===void 0?!0:r,a=e.modules,u=typeof n=="object"?n:ze[n];if(u.baseSyntax&&(u=G(ze[u.baseSyntax],u)),u.modules&&u.modules.length>0)for(var m=0,p=u.modules;m<p.length;m++){var b=p[m],E=je[b];E&&(u=G(E,u))}if(a&&a.length>0)for(var j=0,H=a;j<H.length;j++){var ae=H[j],E=je[ae];E&&(u=G(E,u))}var oe=u.tag?[!0,!!qt(u.tag).wildcard]:[!1,!1],R=oe[0],ue=oe[1],Ee=!!u.ids,le=!!u.classNames,I=!!u.namespace,z=u.namespace&&(u.namespace===!0||u.namespace.wildcard===!0);if(I&&!R)throw new Error("".concat(Re,"Namespaces cannot be enabled while tags are disabled."));var Y=!!i,ce=u.combinators?et(u.combinators):ke,Q=u.attributes?[!0,u.attributes.operators?et(u.attributes.operators):ke,u.attributes.caseSensitivityModifiers?Kt(u.attributes.caseSensitivityModifiers):Ue,u.attributes.unknownCaseSensitivityModifiers==="accept"]:[!1,ke,Ue,!1],B=Q[0],$=Q[1],q=Q[2],fe=Q[3],de=fe||Object.keys(q).length>0,_=u.pseudoClasses?[!0,u.pseudoClasses.definitions?nt(u.pseudoClasses.definitions):Ie,u.pseudoClasses.unknown==="accept"]:[!1,Ie,!1],ee=_[0],pe=_[1],we=_[2],F=u.pseudoElements?[!0,u.pseudoElements.notation==="singleColon"||u.pseudoElements.notation==="both",!u.pseudoElements.notation||u.pseudoElements.notation==="doubleColon"||u.pseudoElements.notation==="both",u.pseudoElements.definitions?nt(Array.isArray(u.pseudoElements.definitions)?{NoArgument:u.pseudoElements.definitions}:u.pseudoElements.definitions):Ie,u.pseudoElements.unknown==="accept"]:[!1,!1,!1,Ie,!1],te=F[0],xe=F[1],he=F[2],ne=F[3],X=F[4],k="",P=k.length,y=0,d="",f=function(o){return d===o},Ce=function(){return f("*")||ye(d)},re=function(o){y=o,d=k.charAt(y)},h=function(){y++,d=k.charAt(y)},M=function(){var o=d;return y++,d=k.charAt(y),o};function N(o){var l=Math.min(P-1,y),v=new Error("".concat(Re).concat(o," Pos: ").concat(l,"."));throw v.position=l,v.name="ParserError",v}function c(o,l){if(!o)return N(l)}var Me=function(){c(y<P,"Unexpected end of input.")},Z=function(){return y>=P},ge=function(o){c(y<P,'Expected "'.concat(o,'" but end of input reached.')),c(d===o,'Expected "'.concat(o,'" but "').concat(d,'" found.')),y++,d=k.charAt(y)};function De(o){var l=Ze(o,y);if(l)return y+=l.length,d=k.charAt(y),l}function Ze(o,l){var v=k.charAt(l),g=o[v];if(g){var S=Ze(g.chars,l+1);if(S)return S;if(g.self)return g.self}}function Se(){for(var o=M(),l=1;be(d)&&l<an;)o+=M(),l++;return Ot(),String.fromCharCode(parseInt(o,16))}function Ft(o){var l="";for(ge(o);y<P;){if(f(o))return h(),l;f("\\")?(h(),f(o)?(l+=o,h()):d===`
`||d==="\f"?h():d==="\r"?(h(),f(`
`)&&h()):be(d)?l+=Se():(l+=d,h())):(l+=d,h())}return l}function x(){if(!ye(d))return null;for(var o="";f("-");)o+=d,h();for(o==="-"&&!at(d)&&!f("\\")&&N("Identifiers cannot consist of a single hyphen."),s&&o.length>=2&&N("Identifiers cannot start with two hyphens with strict mode on."),Te[d]&&N("Identifiers cannot start with hyphens followed by digits.");y<P;)if(at(d))o+=M();else if(f("\\"))h(),Me(),be(d)?o+=Se():o+=M();else break;return o}function kt(){for(var o="";y<P&&!f(")");)if(f("\\")){if(h(),Z()&&!s)return(o+"\\").trim();Me(),be(d)?o+=Se():o+=M()}else o+=M();return o.trim()}function Ot(){if(d===" "||d==="	"||d==="\f"||d===`
`){h();return}d==="\r"&&h(),d===`
`&&h()}function w(){for(;rn[d];)h()}function Ve(o){o===void 0&&(o=!1),w();for(var l=[Ne(o)];f(",");)h(),w(),l.push(Ne(o));return{type:"Selector",rules:l}}function jt(){ge("["),w();var o;if(f("|")){c(I,"Namespaces are not enabled."),h();var l=x();c(l,"Expected attribute name."),o={type:"Attribute",name:l,namespace:{type:"NoNamespace"}}}else if(f("*")){c(I,"Namespaces are not enabled."),c(z,"Wildcard namespace is not enabled."),h(),ge("|");var v=x();c(v,"Expected attribute name."),o={type:"Attribute",name:v,namespace:{type:"WildcardNamespace"}}}else{var g=x();if(c(g,"Expected attribute name."),o={type:"Attribute",name:g},f("|")){var S=y;if(h(),ye(d)){c(I,"Namespaces are not enabled.");var L=x();c(L,"Expected attribute name."),o={type:"Attribute",name:L,namespace:{type:"NamespaceName",name:g}}}else re(S)}}if(c(o.name,"Expected attribute name."),w(),Z()&&!s)return o;if(f("]"))h();else{if(o.operator=De($),c(o.operator,"Expected a valid attribute selector operator."),w(),Me(),sn[d])o.value={type:"String",value:Ft(d)};else if(Y&&f("$")){h();var U=x();c(U,"Expected substitute name."),o.value={type:"Substitution",name:U}}else{var W=x();c(W,"Expected attribute value."),o.value={type:"String",value:W}}if(w(),Z()&&!s)return o;if(!f("]")){var A=x();if(c(A,"Expected end of attribute selector."),o.caseSensitivityModifier=A,c(de,"Attribute case sensitivity modifiers are not enabled."),c(fe||q[o.caseSensitivityModifier],"Unknown attribute case sensitivity modifier."),w(),Z()&&!s)return o}ge("]")}return o}function Ke(){for(var o="";Te[d];)o+=M();return c(o!=="","Formula parse error."),parseInt(o)}var Pt=function(){return f("-")||f("+")||Te[d]};function Mt(){if(f("e")||f("o")){var o=x();if(o==="even")return w(),[2,0];if(o==="odd")return w(),[2,1]}var l=null,v=1;if(f("-")&&(h(),v=-1),Pt()&&(f("+")&&h(),l=Ke(),!f("\\")&&!f("n")))return[0,l*v];l===null&&(l=1),l*=v;var g;if(f("\\")?(h(),be(d)?g=Se():g=M()):g=M(),c(g==="n",'Formula parse error: expected "n".'),w(),f("+")||f("-")){var S=f("+")?1:-1;return h(),w(),[l,S*Ke()]}else return[l,0]}function Ge(o,l,v){var g;if(f("(")){if(h(),w(),Y&&f("$")){h();var S=x();c(S,"Expected substitute name."),g={type:"Substitution",name:S}}else if(v.type==="String")g={type:"String",value:kt()},c(g.value,"Expected ".concat(l," argument value."));else if(v.type==="Selector")g=Ve(!0);else if(v.type==="Formula"){var L=Mt(),U=L[0],W=L[1];if(g={type:"Formula",a:U,b:W},v.ofSelector&&(w(),f("o")||f("\\"))){var A=x();c(A==="of","Formula of selector parse error."),w(),g={type:"FormulaOfSelector",a:U,b:W,selector:Ne()}}}else return N("Invalid ".concat(l," signature."));if(w(),Z()&&!s)return g;ge(")")}else c(v.optional,"Argument is required for ".concat(l,' "').concat(o,'".'));return g}function me(){if(f("*"))return c(ue,"Wildcard tag name is not enabled."),h(),{type:"WildcardTag"};if(ye(d)){c(R,"Tag names are not enabled.");var o=x();return c(o,"Expected tag name."),{type:"TagName",name:o}}else return N("Expected tag name.")}function Je(){if(f("*")){var o=y;if(h(),!f("|")||(h(),!Ce()))return re(o),me();c(I,"Namespaces are not enabled."),c(z,"Wildcard namespace is not enabled.");var l=me();return l.namespace={type:"WildcardNamespace"},l}else if(f("|")){c(I,"Namespaces are not enabled."),h();var l=me();return l.namespace={type:"NoNamespace"},l}else if(ye(d)){var v=x();if(c(v,"Expected tag name."),!f("|"))return c(R,"Tag names are not enabled."),{type:"TagName",name:v};var o=y;if(h(),!Ce())return re(o),{type:"TagName",name:v};c(I,"Namespaces are not enabled.");var l=me();return l.namespace={type:"NamespaceName",name:v},l}else return N("Expected tag name.")}function Ne(o){var l,v;o===void 0&&(o=!1);var g={type:"Rule",items:[]};if(o){var S=De(ce);S&&(g.combinator=S,w())}for(;y<P;)if(Ce())c(g.items.length===0,"Unexpected tag/namespace start."),g.items.push(Je());else if(f("|")){var L=y;if(h(),Ce())c(g.items.length===0,"Unexpected tag/namespace start."),re(L),g.items.push(Je());else{re(L);break}}else if(f(".")){c(le,"Class names are not enabled."),h();var U=x();c(U,"Expected class name."),g.items.push({type:"ClassName",name:U})}else if(f("#")){c(Ee,"IDs are not enabled."),h();var W=x();c(W,"Expected ID name."),g.items.push({type:"Id",name:W})}else if(f("["))c(B,"Attributes are not enabled."),g.items.push(jt());else if(f(":")){var A=!1,Ye=!1;h(),f(":")&&(c(te,"Pseudo elements are not enabled."),c(he,"Pseudo elements double colon notation is not enabled."),A=!0,h());var C=x();if(c(A||C,"Expected pseudo-class name."),c(!A||C,"Expected pseudo-element name."),c(C,"Expected pseudo-class name."),!(!A||X||Object.prototype.hasOwnProperty.call(ne,C))){var V=st.pseudoElements[C],ve='Unknown pseudo-element "'.concat(C,'"');V&&V.length>0&&(ve+=". It is defined in: ".concat(V.join(", "))),N(ve+".")}if(Ye=te&&(A||!A&&xe&&Object.prototype.hasOwnProperty.call(ne,C)),Ye){var Ae=(l=ne[C])!==null&&l!==void 0?l:X&&tt,qe={type:"PseudoElement",name:C},K=Ge(C,"pseudo-element",Ae);K&&(c(K.type!=="Formula"&&K.type!=="FormulaOfSelector","Pseudo-elements cannot have formula argument."),qe.argument=K),g.items.push(qe)}else{c(ee,"Pseudo-classes are not enabled.");var Ae=(v=pe[C])!==null&&v!==void 0?v:we&&tt;if(!Ae){var V=st.pseudoClasses[C],ve='Unknown pseudo-class: "'.concat(C,'"');V&&V.length>0&&(ve+=". It is defined in: ".concat(V.join(", "))),N(ve+".")}var K=Ge(C,"pseudo-class",Ae),_e={type:"PseudoClass",name:C};K&&(_e.argument=K),g.items.push(_e)}}else break;if(g.items.length===0)return Z()?N("Expected rule but end of input reached."):N('Expected rule but "'.concat(d,'" found.'));if(w(),!Z()&&!f(",")&&!f(")")){var S=De(ce);w(),g.nestedRule=Ne(),g.nestedRule.combinator=S}return g}return function(o){if(typeof o!="string")throw new Error("".concat(Re,"Expected string input."));return k=o,P=k.length,y=0,d=k.charAt(0),Ve()}}const un=on({syntax:"selectors-4"});function ln(e){if(typeof e!="string")throw new TypeError("Expected `string` as selector, not `"+e+"`");return un(e)}const Et="֑-߿יִ-﷽ﹰ-ﻼ",wt="A-Za-zÀ-ÖØ-öø-ʸ̀-֐ࠀ-῿‎Ⰰ-﬜︀-﹯﻽-￿",cn=new RegExp("^[^"+wt+"]*["+Et+"]"),fn=new RegExp("^[^"+Et+"]*["+wt+"]");function dn(e){const t=String(e||"");return cn.test(t)?"rtl":fn.test(t)?"ltr":"neutral"}function pn(e,t){const n=e.schema,i=e.language,r=e.direction,s=e.editableOrEditingHost;let a;if(t.type==="element"){const p=t.properties.xmlLang||t.properties.lang,b=t.properties.type||"text",E=ot(t);p!=null&&(e.language=String(p)),n&&n.space==="html"?(t.properties.contentEditable==="true"&&(e.editableOrEditingHost=!0),t.tagName==="svg"&&(e.schema=Dt),E==="rtl"?a=E:E==="ltr"||E!=="auto"&&t.tagName==="html"||E!=="auto"&&t.tagName==="input"&&b==="tel"?a="ltr":(E==="auto"||t.tagName==="bdi")&&(t.tagName==="textarea"?a=Be(Zt(t)):t.tagName==="input"&&(b==="email"||b==="search"||b==="tel"||b==="text")?a=t.properties.value?Be(String(t.properties.value)):"ltr":Tt(t,m)),a&&(e.direction=a)):e.editableOrEditingHost&&(e.editableOrEditingHost=!1)}return u;function u(){e.schema=n,e.language=i,e.direction=r,e.editableOrEditingHost=s}function m(p){if(p.type==="text")return a=Be(p.value),a?Rt:void 0;if(p!==t&&p.type==="element"&&(p.tagName==="bdi"||p.tagName==="script"||p.tagName==="style"||p.tagName==="textare"||ot(p)))return Bt}}function Be(e){const t=dn(e);return t==="neutral"?void 0:t}function ot(e){const t=e.type==="element"&&typeof e.properties.dir=="string"?e.properties.dir.toLowerCase():void 0;return t==="auto"||t==="ltr"||t==="rtl"?t:void 0}function hn(e,t,n){const i=$t(n,e.name),r=t.properties[i.property];let s=gn(r,i);if(!e.value)return s!==void 0;T(e.value.type==="String");let a=e.value.value;if(e.caseSensitivityModifier==="i"&&(a=a.toLowerCase(),s&&(s=s.toLowerCase())),s!==void 0)switch(e.operator){case"=":return a===s;case"$=":return a===s.slice(-a.length);case"*=":return s.includes(a);case"^=":return a===s.slice(0,a.length);case"|=":return a===s||a===s.slice(0,a.length)&&s.charAt(a.length)==="-";case"~=":return a===s||gt(s).includes(a)}return!1}function gn(e,t){if(e!=null)if(typeof e=="boolean"){if(e)return t.attribute}else if(Array.isArray(e)){if(e.length>0)return(t.commaSeparated?Lt:Ut)(e)}else return String(e)}const mn=[];function vn(e,t){return(t.properties.className||mn).includes(e.name)}function yn(e,t){return t.properties.id===e.name}function bn(e,t){return e.name===t.tagName}function En(e,t){return function(n,i){let r=ut(n,"tag");const s=ut(i??"*","range"),a=[];let u=-1;for(;++u<s.length;){const m=s[u].toLowerCase();if(!t&&m==="*")continue;let p=-1;const b=[];for(;++p<r.length;)if(e(r[p].toLowerCase(),m)){if(!t)return r[p];a.push(r[p])}else b.push(r[p]);r=b}return t?a:void 0}}const wn=En(function(e,t){const n=e.split("-"),i=t.split("-");let r=0,s=0;if(i[s]!=="*"&&n[r]!==i[s])return!1;for(r++,s++;s<i.length;){if(i[s]==="*"){s++;continue}if(!n[r])return!1;if(n[r]===i[s]){r++,s++;continue}if(n[r].length===1)return!1;r++}return!0},!0);function ut(e,t){const n=e&&typeof e=="string"?[e]:e;if(!n||typeof n!="object"||!("length"in n))throw new Error("Invalid "+t+" `"+n+"`, expected non-empty string");return n}const xn={}.hasOwnProperty;function J(e,t){const n=e.type==="element"&&xn.call(e.properties,t)&&e.properties[t];return n!=null&&n!==!1}const Cn=new Set([9,10,12,13,32]),lt=48,Sn=57;function Nn(e){if(e=e.trim().toLowerCase(),e==="even")return[2,0];if(e==="odd")return[2,1];let t=0,n=0,i=s(),r=a();if(t<e.length&&e.charAt(t)==="n"&&(t++,n=i*(r??1),u(),t<e.length?(i=s(),u(),r=a()):i=r=0),r===null||t<e.length)throw new Error(`n-th rule couldn't be parsed ('${e}')`);return[n,i*r];function s(){return e.charAt(t)==="-"?(t++,-1):(e.charAt(t)==="+"&&t++,1)}function a(){const m=t;let p=0;for(;t<e.length&&e.charCodeAt(t)>=lt&&e.charCodeAt(t)<=Sn;)p=p*10+(e.charCodeAt(t)-lt),t++;return t===m?null:p}function u(){for(;t<e.length&&Cn.has(e.charCodeAt(t));)t++}}var $e,ct;function An(){return ct||(ct=1,$e={trueFunc:function(){return!0},falseFunc:function(){return!1}}),$e}var In=An();const ft=Wt(In);function Fn(e){const t=e[0],n=e[1]-1;if(n<0&&t<=0)return ft.falseFunc;if(t===-1)return s=>s<=n;if(t===0)return s=>s===n;if(t===1)return n<0?ft.trueFunc:s=>s>=n;const i=Math.abs(t),r=(n%i+i)%i;return t>1?s=>s>=n&&s%i===r:s=>s<=n&&s%i===r}function dt(e){return Fn(Nn(e))}const kn=dt.default||dt,On=Ht("name",{handlers:{"any-link":jn,blank:Pn,checked:Mn,dir:Dn,disabled:xt,empty:Tn,enabled:Rn,"first-child":Bn,"first-of-type":$n,has:Ln,is:Ct,lang:Wn,"last-child":Hn,"last-of-type":zn,not:Qn,"nth-child":Xn,"nth-last-child":Zn,"nth-last-of-type":Vn,"nth-of-type":Kn,"only-child":Gn,"only-of-type":Jn,optional:Yn,"read-only":qn,"read-write":St,required:Nt,root:_n,scope:er},invalid:Un,unknown:tr});function jn(e,t){return(t.tagName==="a"||t.tagName==="area"||t.tagName==="link")&&J(t,"href")}function O(e,t){if(e.shallow)throw new Error("Cannot use `:"+t.name+"` without parent")}function Pn(e,t){return!At(t,n);function n(i){return i.type==="element"||i.type==="text"&&!Qt(i)}}function Mn(e,t){return t.tagName==="input"||t.tagName==="menuitem"?!!((t.properties.type==="checkbox"||t.properties.type==="radio")&&J(t,"checked")):t.tagName==="option"?J(t,"selected"):!1}function Dn(e,t,n,i,r){return T(e.argument),T(e.argument.type==="String"),r.direction===e.argument.value}function xt(e,t){return(t.tagName==="button"||t.tagName==="input"||t.tagName==="select"||t.tagName==="textarea"||t.tagName==="optgroup"||t.tagName==="option"||t.tagName==="menuitem"||t.tagName==="fieldset")&&J(t,"disabled")}function Tn(e,t){return!At(t,n);function n(i){return i.type==="element"||i.type==="text"}}function Rn(e,t){return!xt(e,t)}function Bn(e,t,n,i,r){return O(r,e),r.elementIndex===0}function $n(e,t,n,i,r){return O(r,e),r.typeIndex===0}function Pe(e){let t=e._cachedFn;if(!t){const n=e.argument;if(n.type!=="Formula")throw new Error("Expected `nth` formula, such as `even` or `2n+1` (`of` is not yet supported)");t=kn(n.a+"n+"+n.b),e._cachedFn=t}return t}function Ln(e,t,n,i,r){T(e.argument),T(e.argument.type==="Selector");const s={...r,found:!1,one:!0,results:[],rootQuery:e.argument,scopeElements:[t],shallow:!1};return Xe(s,{type:"root",children:t.children}),s.results.length>0}function Un(){}function Ct(e,t,n,i,r){T(e.argument),T(e.argument.type==="Selector");const s={...r,found:!1,one:!0,results:[],rootQuery:e.argument,scopeElements:[t],shallow:!1};return Xe(s,t),s.results[0]===t}function Wn(e,t,n,i,r){return T(e.argument),T(e.argument.type==="String"),r.language!==""&&r.language!==void 0&&wn(r.language,zt(e.argument.value)).length>0}function Hn(e,t,n,i,r){return O(r,e),!!(r.elementCount&&r.elementIndex===r.elementCount-1)}function zn(e,t,n,i,r){return O(r,e),typeof r.typeIndex=="number"&&typeof r.typeCount=="number"&&r.typeIndex===r.typeCount-1}function Qn(e,t,n,i,r){return!Ct(e,t,n,i,r)}function Xn(e,t,n,i,r){const s=Pe(e);return O(r,e),typeof r.elementIndex=="number"&&s(r.elementIndex)}function Zn(e,t,n,i,r){const s=Pe(e);return O(r,e),!!(typeof r.elementCount=="number"&&typeof r.elementIndex=="number"&&s(r.elementCount-r.elementIndex-1))}function Vn(e,t,n,i,r){const s=Pe(e);return O(r,e),typeof r.typeCount=="number"&&typeof r.typeIndex=="number"&&s(r.typeCount-1-r.typeIndex)}function Kn(e,t,n,i,r){const s=Pe(e);return O(r,e),typeof r.typeIndex=="number"&&s(r.typeIndex)}function Gn(e,t,n,i,r){return O(r,e),r.elementCount===1}function Jn(e,t,n,i,r){return O(r,e),r.typeCount===1}function Yn(e,t){return!Nt(e,t)}function qn(e,t,n,i,r){return!St(e,t,n,i,r)}function St(e,t,n,i,r){return t.tagName==="input"||t.tagName==="textarea"?!J(t,"readOnly")&&!J(t,"disabled"):!!r.editableOrEditingHost}function Nt(e,t){return(t.tagName==="input"||t.tagName==="textarea"||t.tagName==="select")&&J(t,"required")}function _n(e,t,n,i,r){return!!((!i||i.type==="root")&&r.schema&&(r.schema.space==="html"||r.schema.space==="svg")&&(t.tagName==="html"||t.tagName==="svg"))}function er(e,t,n,i,r){return r.scopeElements.includes(t)}function At(e,t){const n=e.children;let i=-1;for(;++i<n.length;)if(t(n[i]))return!0;return!1}function tr(e){const t=e;throw new Error("Unknown pseudo-selector `"+t.name+"`")}function nr(e,t,n,i,r){for(const s of e.items)if(s.type==="Attribute"){if(!hn(s,t,r.schema))return!1}else if(s.type==="Id"){if(!yn(s,t))return!1}else if(s.type==="ClassName"){if(!vn(s,t))return!1}else if(s.type==="PseudoClass"){if(!On(s,t,n,i,r))return!1}else{if(s.type==="PseudoElement")throw new Error("Invalid selector: `::"+s.name+"`");if(s.type==="TagName"&&!bn(s,t))return!1}return!0}const rr=[];function Xe(e,t){t&&It(e,[],t,void 0,void 0,t)}function Le(e,t,n){const i=e[t];i?i.push(n):e[t]=[n]}function ir(e,t,n,i){const r=Oe(t.descendant,t.directChild);let s,a=-1;const u={count:0,types:new Map},m={count:0,types:new Map};for(;++a<n.children.length;)pt(u,n.children[a]);for(a=-1;++a<n.children.length;){const p=n.children[a],b=p.type==="element"?p.tagName.toUpperCase():void 0;if(e.elementIndex=m.count,e.typeIndex=b&&m.types.get(b)||0,e.elementCount=u.count,e.typeCount=b?u.types.get(b):0,"children"in p){const E=Oe(r,s),j=It(e,E,n.children[a],a,n,i);s=Oe(j.generalSibling,j.adjacentSibling)}if(e.one&&e.found)break;pt(m,n.children[a])}}function sr(e,t,n,i,r){const s={adjacentSibling:void 0,descendant:void 0,directChild:void 0,generalSibling:void 0};let a=-1;for(;++a<t.length;){const u=t[a];if(e.one&&e.found)break;if(e.shallow&&u.nestedRule)throw new Error("Expected selector without nesting");if(nr(u,n,i,r,e)){const m=u.nestedRule;if(m){const p=m.combinator==="+"?"adjacentSibling":m.combinator==="~"?"generalSibling":m.combinator===">"?"directChild":"descendant";Le(s,p,m)}else e.found=!0,e.results.includes(n)||e.results.push(n)}u.combinator===void 0?Le(s,"descendant",u):u.combinator==="~"&&Le(s,"generalSibling",u)}return s}function Oe(e,t){return e&&t&&e.length>0&&t.length>0?[...e,...t]:e&&e.length>0?e:t&&t.length>0?t:rr}function pt(e,t){if(t.type==="element"){const n=t.tagName.toUpperCase(),i=(e.types.get(n)||0)+1;e.count++,e.types.set(n,i)}}function It(e,t,n,i,r,s){let a={adjacentSibling:void 0,descendant:void 0,directChild:void 0,generalSibling:void 0};const u=pn(e,n);if(n.type==="element"){let m=e.rootQuery.rules;r&&r!==s&&(m=e.rootQuery.rules.filter(p=>p.combinator===void 0||p.combinator===">"&&r===s)),a=sr(e,Oe(t,m),n,i,r)}return"children"in n&&!e.shallow&&!(e.one&&e.found)&&ir(e,a,n,s),u(),a}function ar(e,t,n){const i=or(e,t);return Xe(i,t||void 0),i.results}function or(e,t,n){return{direction:"ltr",editableOrEditingHost:!1,elementCount:void 0,elementIndex:void 0,found:!1,language:void 0,one:!1,results:[],rootQuery:ln(e),schema:Xt,scopeElements:t?t.type==="root"?t.children:[t]:[],shallow:!1,typeIndex:void 0,typeCount:void 0}}const ur={}.hasOwnProperty,lr=(function(e,...t){let n=-1;const i=new Map,r=[];if(ht(e)){if(e.type!=="element")throw new Error("Expected element node");Array.isArray(e.properties.className)&&Qe(i,e.properties.className),e.properties.className=r}else t.unshift(e);for(;++n<t.length;)Qe(i,t[n]);for(const[s,a]of i)a&&r.push(s);return ht(e)?e:r});function Qe(e,t){let n=-1,i,r;if(typeof t=="number")e.set(String(t),!0);else if(typeof t=="string")for(r=gt(t);++n<r.length;)e.set(r[n],!0);else if(t&&typeof t=="object")if(Array.isArray(t))for(;++n<t.length;)Qe(e,t[n]);else for(i in t)ur.call(t,i)&&e.set(i,t[i])}function ht(e){return!!(e&&typeof e=="object"&&"type"in e)}const dr=e=>t=>{e&&Object.entries(e).map(([n,i])=>r=>ar(n,r).forEach(s=>{lr(s,i)})).forEach(n=>n(t))};export{dr as default};
