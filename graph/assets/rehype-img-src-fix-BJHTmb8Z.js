import{v as a}from"./index-DVcZB_95.js";function c(r){const t=new TextEncoder().encode(r),s=String.fromCharCode(...t);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function f(r){const t=/^(data:|https?:|\/\/|\/api\/node\/|#|\s*$)/;return s=>{a(s,"element",e=>{if(e.tagName!=="img"||typeof e.properties?.src!="string")return;const n=e.properties.src.trim();if(t.test(n))return;const[i,o=""]=n.split(/(?=\.[^.]+$)/);e.properties&&i&&(e.properties.src=`/api/node/${r}/${c(i)}${o}`)})}}export{f as default};
